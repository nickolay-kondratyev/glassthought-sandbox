#### Code
```kotlin
package com.glassthought.sandbox

import gt.sandbox.util.output.Out
import kotlinx.coroutines.*

val indexParsed = CompletableDeferred<Unit>()
val directoriesWatched = CompletableDeferred<Unit>()

val out = Out.standard()

suspend fun waitForAllStates() {
  out.info("Starting to wait for all states")

  // Wait for both states to complete
  indexParsed.await()
  directoriesWatched.await()

  out.info("Finished waiting")
}

fun markIndexParsed() {
  indexParsed.complete(Unit)
}

fun markDirectoriesWatched() {
  directoriesWatched.complete(Unit)
}


suspend fun main(args: Array<String>) {
  out.info("Starting the application")

  val scope = CoroutineScope(Dispatchers.Default)

  val job1 = scope.launch(CoroutineName("UpdateNews")) {

    out.info("Sleeping")
    Thread.sleep(1000)
    markIndexParsed()
    markDirectoriesWatched()
    out.info("Marked deferred features as done")
  }

  val job2 = scope.launch(CoroutineName("WaitForAllStates")) {
    waitForAllStates()
    out.info("Done waiting.")
  }

  job1.join()
  job2.join()
}
```

#### Command to reproduce:
```bash
gt.sandbox.checkout.commit 60a34577f89ec6f95b74 \
&& cd "${GT_SANDBOX_REPO}" \
&& cmd.run.announce "./gradlew run --quiet"
```

#### Recorded output of command:
```txt
[elapsed:   22ms][ðŸ¥‡/tname:main/tid:1][coroutine:unnamed] Starting the application
[elapsed:   52ms][â“·/tname:DefaultDispatcher-worker-2/tid:21][coroutine:WaitForAllStates] Starting to wait for all states
[elapsed:   51ms][â“¶/tname:DefaultDispatcher-worker-1/tid:20][coroutine:UpdateNews] Sleeping
[elapsed: 1059ms][â“¶/tname:DefaultDispatcher-worker-1/tid:20][coroutine:UpdateNews] Marked deferred features as done
[elapsed: 1059ms][â“·/tname:DefaultDispatcher-worker-2/tid:21][coroutine:WaitForAllStates] Finished waiting
[elapsed: 1060ms][â“·/tname:DefaultDispatcher-worker-2/tid:21][coroutine:WaitForAllStates] Done waiting.
```
