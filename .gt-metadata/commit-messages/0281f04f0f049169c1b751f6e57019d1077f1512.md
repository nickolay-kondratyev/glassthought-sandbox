#### Code
```kotlin
package com.glassthought.sandbox

import gt.sandbox.util.output.Out
import kotlinx.coroutines.CompletableDeferred
import kotlinx.coroutines.delay
import kotlinx.coroutines.runBlocking
import kotlin.concurrent.thread

val indexParsed = CompletableDeferred<Unit>()
val directoriesWatched = CompletableDeferred<Unit>()

suspend fun waitForAllStates() {
  // Wait for both states to complete
  indexParsed.await()
  directoriesWatched.await()
}

fun markIndexParsed() {
  indexParsed.complete(Unit)
}

fun markDirectoriesWatched() {
  directoriesWatched.complete(Unit)
}

val out = Out.standard()

suspend fun main(args: Array<String>) {
  out.info("Hello, world!")
  thread {
    runBlocking {
      out.info("Sleeping")
      Thread.sleep(1000)
      markIndexParsed()
      markDirectoriesWatched()
      out.info("Done Sleeping")
    }
  }

  waitForAllStates()
  delay(1)
  out.info("Goodbye, world!")
}
```

#### Command to reproduce:
```bash
gt.sandbox.checkout.commit 0281f04f0f049169c1b7 \
&& cd "${GT_SANDBOX_REPO}" \
&& cmd.run.announce "./gradlew run --quiet"
```

#### Recorded output of command:
```txt
[elapsed:   23ms][ðŸ¥‡/tname:main/tid:1][coroutine:unnamed] Hello, world!
[elapsed:   45ms][â“¶/tname:Thread-0/tid:20][coroutine:unnamed] Sleeping
[elapsed: 1060ms][â“·/tname:kotlinx.coroutines.DefaultExecutor/tid:21][coroutine:unnamed] Goodbye, world!
[elapsed: 1060ms][â“¶/tname:Thread-0/tid:20][coroutine:unnamed] Done Sleeping
```
