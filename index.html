<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Simple 3D Graph – Quest 3 VR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
      html, body {
          margin: 0;
          padding: 0;
          overflow: hidden;
      }

      #graph {
          width: 100vw;
          height: 100vh;
      }
  </style>

  <!-- Three.js core -->
  <script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>

  <!-- WebXR helper (attaches global `VRButton`) -->
  <script src="https://unpkg.com/three@0.152.2/examples/js/webxr/VRButton.js"></script>

  <!-- 3d‑force‑graph -->
  <script src="https://unpkg.com/3d-force-graph@1.73.0/dist/3d-force-graph.min.js"></script>
</head>
<body>
  <div id="graph"></div>

  <script>
      /* ---------- sample graph data ---------- */
      const N = 60;
      const nodes = [...Array(N).keys()].map(i => ({
          id: String(i),
          name: `Node ${i}`,
          val: 3 + Math.random() * 12,
          color: `hsl(${Math.random() * 360},70%,60%)`
      }));
      const links = [];
      nodes.forEach(({id}) => {
          for (let k = 1; k <= 2; k++)          // ring lattice
              links.push({source: id, target: String((+id + k) % N), value: 2});
          if (Math.random() > 0.7)               // long‑range rewiring
              links.push({source: id, target: String(Math.floor(Math.random() * N)), value: 1});
      });

      /* ---------- graph & renderer ---------- */
      const graph = ForceGraph3D({
          extraRendererConfig: {antialias: true, alpha: true, xr: {enabled: true}}
      })(document.getElementById('graph'))
          .backgroundColor('#111133')
          .graphData({nodes, links})
          .nodeLabel(n => n.name)
          .linkWidth(l => l.value);

      // lights
      graph.scene().add(new THREE.AmbientLight(0xffffff, 0.6));
      const dir = new THREE.DirectionalLight(0xffffff, 0.8);
      dir.position.set(1, 1, 1);
      graph.scene().add(dir);

      /* ---------- enable VR ---------- */
      document.body.appendChild(VRButton.createButton(graph.renderer()));

      /* ---------- initial framing ---------- */
      setTimeout(() => graph.zoomToFit(1000, 40), 500);
  </script>
</body>
</html>
