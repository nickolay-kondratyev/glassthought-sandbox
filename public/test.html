<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Graph Test</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    #graph-container {
      width: 100vw;
      height: 100vh;
      background-color: #000;
    }
  </style>
  <script src="https://unpkg.com/three@0.176.0"></script>
  <script src="https://unpkg.com/three-spritetext@1.8.1"></script>
  <script src="https://unpkg.com/3d-force-graph@1.73.0"></script>
</head>
<body>
  <div id="graph-container"></div>
  <script>
    // Sample data
    const graphData = {
      nodes: [
        {"id": "1", "name": "Node A", "val": 10, "color": "#ff6347"},
        {"id": "2", "name": "Node B", "val": 8, "color": "#4682b4"},
        {"id": "3", "name": "Node C", "val": 6, "color": "#32cd32"},
        {"id": "4", "name": "Node D", "val": 5, "color": "#ffd700"},
        {"id": "5", "name": "Node E", "val": 7, "color": "#9932cc"},
        {"id": "6", "name": "Node F", "val": 9, "color": "#ff69b4"}
      ],
      links: [
        {"source": "1", "target": "2", "value": 3},
        {"source": "1", "target": "3", "value": 2},
        {"source": "2", "target": "3", "value": 1},
        {"source": "2", "target": "4", "value": 4},
        {"source": "3", "target": "5", "value": 3},
        {"source": "4", "target": "5", "value": 2},
        {"source": "5", "target": "6", "value": 5},
        {"source": "1", "target": "6", "value": 3}
      ]
    };

    // Initialize graph
    const graph = ForceGraph3D({ controlType: 'orbit' })
      (document.getElementById('graph-container'))
      .nodeLabel(node => node.name || node.id)
      .nodeVal(node => node.val || 1)
      .nodeColor(node => node.color || '#ffffaa')
      .linkLabel(link => `${link.source} â†’ ${link.target}`)
      .linkWidth(link => link.value || 1)
      .linkColor(() => '#ffffff')
      .linkOpacity(0.5)
      .backgroundColor('#000011')
      .showNavInfo(true);

    // Set dimensions
    const container = document.getElementById('graph-container');
    graph.width(container.clientWidth);
    graph.height(container.clientHeight);
    
    // Load data
    graph.graphData(graphData);
    
    // Configure forces
    graph.d3Force('link').distance(link => 50);
    graph.d3Force('charge').strength(-120);
    
    // Center after a short delay
    setTimeout(() => {
      graph.zoomToFit(1000, 30);
    }, 1000);
    
    // Handle window resizing
    window.addEventListener('resize', () => {
      graph.width(container.clientWidth);
      graph.height(container.clientHeight);
    });
    
    // Make graph accessible globally for debugging
    window.graph = graph;
  </script>
</body>
</html> 